{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{% static 'css/recipe_style.css' %}">
    <title>CockItUp</title>
</head>
<body>
<div class="container">
    {% include 'navbar.html' %}
    <div class="container-fluid">
        <div class="sector banner">
            <div class="row">
                <div class="col text-center d-flex justify-content-center align-items-center mt-3 mb-3">
                    <div>
                        <h1 class="fw-bold"><span class="baner-title-span">Recipes</span> & Cooking Ideas
                        </h1>
                        <span class="banner-text">
                            We know the deal. We feel your pain.
                        </span><br>
                        <span class="banner-text">Here are our superstar workhorse recipes, designed and
                            tested to help you cook a great family meal.</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="sector mt-5">
            <div class="row">
                <div class="col text-center d-block justify-content-center">
                    <div class="d-block justify-content-center">
                        <h3>Search your Recipe</h3>
                        <div class="input-group input-group-lg mx-auto custom-search">
                            <input type="search" class="form-control"/>
                            <button type="button" class="btn search-button">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>

                </div>
            </div>

        </div>
        <div class="sector mt-5">
            <div class="row">
                <div class="col">
                    <!-- Swiper -->
                    <div class="d-flex justify-content-center flex-wrap gap-3">
                        <form method="post">
                            {% csrf_token %}
                            <button class="swiper-slide" name="soup" type="submit">soup</button>
                        </form>
                        <div class="swiper-slide">main course</div>
                        <div class="swiper-slide">side dish</div>
                        <div class="swiper-slide ">dessert</div>
                        <div class="swiper-slide">salad</div>
                        <div class="swiper-slide">appetizer</div>
                        <div class="swiper-slide">breakfast</div>
                        <div class="swiper-slide">sauce</div>
                        <div class="swiper-slide">drink</div>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <div class="sector">
            <h3 class="trending">{{ section_title }}</h3>
            <div class="row row-cols-1 row-cols-sm-1 row-cols-md-2 row-cols-lg-4">
                {% for recipe in recipes %}
                    <div class="col mb-4">
                        <div class="card h-100">
                            <img src="{{ recipe.image }}" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">{{ recipe.title }}</h5>
                                <div class="card-info">
                                    <div class="card-time">
                                        <i class="fa-regular fa-clock"></i>
                                        <p class="card-text">{{ recipe.readyInMinutes }} minutes</p>
                                    </div>
                                    <div class="card-portion">
                                        <i class="fa-solid fa-utensils"></i>
                                        <p class="card-text">{{ recipe.servings }} portions</p>
                                    </div>
                                </div>
                                <div class="card-calories">
                                    <i class="fa-solid fa-fire"></i>
                                    <p class="card-text">{{ recipe.nutrition.nutrients.0.amount }} calories</p>
                                </div>


                            </div>
                            <div class="card-footer">
                                <a href="{% url 'recipe_detail' recipe_id=recipe.id %}"
                                   class="btn btn-primary recipe-button">Zobacz przepis</a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
            {% if recipes.count > 8 %}
                <div class="pagination-section mt-4">
                    <ul class="pagination justify-content-end">
                        {% if recipes.has_previous %}
                            <li class="page-item">
                                <a class="page-link" href="?page=1">First</a>
                            </li>
                            <li class="page-item">
                                <a class="page-link" href="?page={{ recipes.previous_page_number }}">Previous</a>
                            </li>
                        {% endif %}

                        {% for num in recipes.paginator.page_range %}
                            <li class="page-item{% if num == recipes.number %} active{% endif %}">
                                <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                            </li>
                        {% endfor %}

                        {% if recipes.has_next %}
                            <li class="page-item">
                                <a class="page-link" href="?page={{ recipes.next_page_number }}">Next</a>
                            </li>
                            <li class="page-item">
                                <a class="page-link" href="?page={{ recipes.paginator.num_pages }}">Last</a>
                            </li>
                        {% endif %}
                    </ul>
                </div>
            {% endif %}
        </div>

        <hr>
        {% include 'footer.html' %}
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    const active_link = document.getElementById('nav-recipe');
    active_link.classList.add('active', 'fw-bold');

    $(document).ready(function () {
        // Znajdź wszystkie elementy card-title
        let cardTitles = $(".card-title");

        // Znajdź największą wysokość card-title
        let maxHeight = 0;
        cardTitles.each(function () {
            let titleHeight = $(this).height();
            if (titleHeight > maxHeight) {
                maxHeight = titleHeight;
            }
        });

        // Ustaw wszystkim card-title największą wysokość
        cardTitles.height(maxHeight);
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
</body>
</html>